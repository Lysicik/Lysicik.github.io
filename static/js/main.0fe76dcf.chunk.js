(this.webpackJsonplab5=this.webpackJsonplab5||[]).push([[0],{16:function(e,t,a){e.exports=a(38)},21:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(15),o=a.n(s),r=a(5),c=a(6),l=a(8),u=a(7),h=(a(21),a(22),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isLogin,a=e.onPageChange,n=e.onLogout;return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"header__title",onClick:function(){a(f.main)}},i.a.createElement("b",null,"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440 \u0432\u0430\u043b\u044e\u0442")),i.a.createElement("div",{className:"header__buttons"},!t&&i.a.createElement("div",{className:"header__button",onClick:function(){a(f.login)}},"\u0412\u0445\u043e\u0434"),!t&&i.a.createElement("div",{className:"header__button",onClick:function(){a(f.register)}},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),t&&i.a.createElement("div",{className:"header__button",onClick:function(){a(f.convert)}},"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u044f"),t&&i.a.createElement("div",{className:"header__button",onClick:n},"\u0412\u044b\u0445\u043e\u0434")))}}]),a}(i.a.Component)),m=(a(23),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={name:"",password:"",error:""},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.password,n=e.error;return i.a.createElement("div",{className:"login"},i.a.createElement("div",{className:"login__container"},i.a.createElement("div",{className:"login__title"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c"),i.a.createElement("input",{value:t,onChange:this.onNameChange.bind(this),placeholder:"\u041b\u043e\u0433\u0438\u043d",className:"login__elem"}),i.a.createElement("input",{value:a,onChange:this.onPasswordChange.bind(this),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"login__elem"}),i.a.createElement("button",{className:"login__button",onClick:this.onLogin.bind(this)},"\u0412\u043e\u0439\u0442\u0438"),i.a.createElement("div",{className:"login__elem-error"},n)))}},{key:"onNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"onLogin",value:function(){var e=this.state,t=e.name,a=e.password;t?a?this.props.onLogin(t,a):this.setState({error:"\u0412\u044b \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}):this.setState({error:"\u0412\u044b \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u043b\u043e\u0433\u0438\u043d"})}}]),a}(i.a.Component));a(24);var g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={name:"",password:"",email:"",error:""},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.password,n=e.email,s=e.error;return i.a.createElement("div",{className:"register"},i.a.createElement("div",{className:"register__container"},i.a.createElement("div",{className:"register__title"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c"),i.a.createElement("input",{id:"file_input",type:"file",accept:"image/jpeg,image/png",className:"register__elem"}),i.a.createElement("input",{value:t,onChange:this.onNameChange.bind(this),placeholder:"\u041b\u043e\u0433\u0438\u043d",className:"register__elem"}),i.a.createElement("input",{value:n,onChange:this.onEmailChange.bind(this),placeholder:"\u041f\u043e\u0447\u0442\u0430",className:"register__elem"}),i.a.createElement("input",{value:a,onChange:this.onPasswordChange.bind(this),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"register__elem"}),i.a.createElement("button",{className:"register__button",onClick:this.onRegister.bind(this)},"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),i.a.createElement("div",{className:"register__elem-error"},s)))}},{key:"onNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"onEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"onRegister",value:function(){var e=this,t=this.state,a=t.name,n=t.password,i=t.email,s=document.getElementById("file_input").files[0];a?n?s?i&&function(e){return/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(e)}(i)?this.setState({error:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."},(function(){e.props.onRegister(a,n,i,s)})):this.setState({error:"\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443"}):this.setState({error:"\u0412\u044b \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}):this.setState({error:"\u0412\u044b \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}):this.setState({error:"\u0412\u044b \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u043b\u043e\u0433\u0438\u043d"})}}]),a}(i.a.Component),v=(a(25),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={data:{}},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.exchangeratesapi.io/latest?base=RUB").then((function(e){return e.json()})).then((function(t){return e.setState({data:t.rates})}))}},{key:"render",value:function(){var e=this.state.data,t=Object.keys(e).map((function(t){return i.a.createElement("tr",null,i.a.createElement("th",null,t),i.a.createElement("th",null,e[t]))}));return i.a.createElement("div",{className:"main"},i.a.createElement("div",{className:"main__table"},i.a.createElement("table",{border:"1"},i.a.createElement("tr",null,i.a.createElement("th",null,"\u0412\u0430\u043b\u044e\u0442\u0430"),i.a.createElement("th",null,"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u043e\u0436\u043d\u043e \u043a\u0443\u043f\u0438\u0442\u044c \u043d\u0430 1 \u0440\u0443\u0431\u043b\u044c")),t)))}}]),a}(i.a.Component)),d=(a(26),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={data:{},key1:"",key2:"",val1:"",val2:"???"},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.exchangeratesapi.io/latest?base=RUB").then((function(e){return e.json()})).then((function(t){return e.setState({data:t.rates})}))}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.val1,n=e.val2,s=Object.keys(t).map((function(e){return i.a.createElement("option",null,e)}));return i.a.createElement("div",{className:"convert"},i.a.createElement("div",{className:"convert__content"},i.a.createElement("div",{className:"convert__wrapper"},i.a.createElement("select",{onChange:this.onKey1Change.bind(this),className:"convert__select"},i.a.createElement("option",{disabled:!0,selected:!0,value:!0}," -- select an option -- "),s),i.a.createElement("input",{value:a,onChange:this.onValChange.bind(this),className:"convert__input"})),i.a.createElement("div",{className:"convert__wrapper"},i.a.createElement("select",{onChange:this.onKey2Change.bind(this),className:"convert__select"},i.a.createElement("option",{disabled:!0,selected:!0,value:!0}," -- select an option -- "),s),i.a.createElement("div",{className:"convert__value"},n))))}},{key:"onKey1Change",value:function(e){var t=this;this.setState({key1:e.target.value},(function(){t.onButtonClick()}))}},{key:"onKey2Change",value:function(e){var t=this;this.setState({key2:e.target.value},(function(){t.onButtonClick()}))}},{key:"onValChange",value:function(e){var t=this;this.setState({val1:e.target.value.replace(/\D+/g,""),val2:"???"},(function(){t.onButtonClick()}))}},{key:"onButtonClick",value:function(){var e=this,t=this.state,a=t.key1,n=t.key2,i=t.val1;a&&n&&i&&fetch("https://api.exchangeratesapi.io/latest?symbols=".concat(n,"&base=").concat(a)).then((function(e){return e.json()})).then((function(t){var a=t.rates;e.setState({val2:i*a[n]})}))}}]),a}(i.a.Component)),p=a(11);p.initializeApp({apiKey:"AIzaSyAy_-YUMnW2Ng5y4Ba5vM9SYPNYOLtmu1Y",authDomain:"js-lab4.firebaseapp.com",databaseURL:"https://js-lab4.firebaseio.com",projectId:"js-lab4",storageBucket:"js-lab4.appspot.com",messagingSenderId:"427284355732",appId:"1:427284355732:web:fd4b138a0ee1226afbf281"});var f={main:"/main",login:"/login",register:"/register",convert:"/convert"},b=function(){window.history.pushState({},"",document.location.origin+f.main)},_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={page:f.main,isLogin:"true"===localStorage.getItem("isLogin")},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.isLogin;switch(document.location.pathname){case f.convert:e?this.setState({page:f.convert}):this.setState({page:f.main},b);break;case f.login:e?this.setState({page:f.main},b):this.setState({page:f.login});break;case f.register:e?this.setState({page:f.main},b):this.setState({page:f.register});break;default:this.setState({page:f.main},b)}}},{key:"render",value:function(){var e=this.state,t=e.isLogin,a=e.page;return i.a.createElement("div",{className:"app"},i.a.createElement(h,{onPageChange:this.onPageChange.bind(this),isLogin:t,onLogout:this.onLogout.bind(this)}),a===f.login&&i.a.createElement(m,{onLogin:this.onLogin.bind(this)}),a===f.register&&i.a.createElement(g,{onRegister:this.onRegister.bind(this)}),a===f.main&&i.a.createElement(v,null),a===f.convert&&i.a.createElement(d,null))}},{key:"onPageChange",value:function(e){this.setState({page:e},(function(){window.history.pushState({},"",document.location.origin+e)}))}},{key:"onLogin",value:function(e,t){var a=this;!function(e,t,a,n){p.database().ref().child("users").child(e).child("Password").on("value",(function(e){t===e.val()?a():n()}))}(e,t,(function(){a.setState({isLogin:!0,page:f.main},(function(){localStorage.setItem("isLogin",!0),b()}))}),(function(){alert("\u041f\u0440\u0438 \u043b\u043e\u0433\u0438\u043d\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))}},{key:"onRegister",value:function(e,t,a,n){var i=this;!function(e,t,a,n,i,s){p.database().ref().child("users").child(e).child("Login").on("value",(function(o){var r=p.storage().ref("users/"+n.name).put(n);r.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done")}),(function(e){return console.log(e),s()}),(function(){r.snapshot.ref.getDownloadURL().then((function(n){p.database().ref("users/"+e).set({email:a,Login:e,Password:t,fileUrl:n},(function(e){return e?s():i()})),console.log("FILE URL: ",n)}))}))}))}(e,t,a,n,(function(){i.setState({isLogin:!0,page:f.main},(function(){localStorage.setItem("isLogin",!0),b()}))}),(function(){alert("\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))}},{key:"onLogout",value:function(){this.setState({isLogin:!1,page:f.main},(function(){localStorage.setItem("isLogin",!1),b()}))}}]),a}(i.a.Component);o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(_,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.0fe76dcf.chunk.js.map